<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GPS Data Visualization v1.0</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>

  <body>
    <header>GPS Data Visualization v2.0</header>

    <!-- Main container to hold the map and telemetry panel -->
    <div id="main-container">
      <!-- Side panel to display searches -->
      <div id="search-panel">
        <h3>Searches</h3>
        <div id="search-content">Select search</div>
      </div>

      <!-- Wrapper div to hold the map and the controls -->
      <div id="map-controls-wrapper">
        <!-- Map container -->
        <div id="map-container">
          <iframe
            src="{{ url_for('static', filename='footprint.html') }}"
            width="100%"
            height="100%"
            id="map-iframe"
            >RENDER</iframe
          >
        </div>

        <!-- Controls container -->
        <div id="controls-container">
          <!-- Dropdown for selecting Azure containers -->
          <div id="container-selector">
            <label>Select Base Stations:</label>
            <div id="checkbox-container">
              {% for container in container_names %}
              <label>
                <input
                  type="checkbox"
                  class="container-checkbox"
                  value="{{ container }}"
                />
                {{ container }}
              </label>
              {% endfor %}
            </div>
          </div>

          <!-- Search controls -->
          <div id="user-buttons">
            <div id="button-container">
              <button id="start-search">Start Search</button>
              <button id="end-search">End Search</button>
            </div>
            <button id="fetch-data-button">Fetch Latest GPS Data</button>
          </div>

          <!-- Table container -->
          <div id="table-container">
            <label>Download GPX Files:</label>
            <br />
            <a>Complete a search to create GPX files.</a>
          </div>
        </div>
      </div>

      <!-- Side panel to display telemetry data -->
      <div id="telemetry-panel">
        <h3>Telemetry Data</h3>
        <div id="telemetry-content">
          Hover over a ping to see its data here.
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/index.js') }}"></script>


    <!-- Historical Search Form (added here, below the map and main-container) -->
    <div id="historical-search">
        <h2>Search for Historical Data</h2>

        <form action="/submit-date" method="POST">
            <label for="start-date">Select Start Date:</label>
            <input type="date" id="start-date" name="start-date" required>

            <label for="end-date">Select End Date:</label>
            <input type="date" id="end-date" name="end-date">
    
            <label for="base-station">Base Station:</label>
            <!-- Multi-select dropdown for Base Stations -->
            <select id="base-station" name="base-station" multiple>
                <!-- Dynamically populated base stations will be inserted here -->
                {% for station in base_stations %}
                <option value="{{ station }}">{{ station }}</option>
                {% endfor %}
            </select>

    <input type="submit" value="Submit">
</form>
    
    
</div>

    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
</body>

</html>

