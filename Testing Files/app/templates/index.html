<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Data Visualization</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <header>
        GPS Data Visualization
    </header>
    <div id="map-container">
        <iframe src="{{ url_for('static', filename='test_footprint.html') }}" width="100%" height="100%"
            style="border:none;" id="map-iframe"></iframe>
    </div>
    <button id="fetch-data-button">Fetch Latest GPS Data</button>
    <button id="push-data-button">Push Data to Server</button>

    <script>
        document.getElementById('fetch-data-button').addEventListener('click', function () {
            fetch('/api/gps-data')
                .then(response => response.json())
                .then(data => {
                    console.log('GPS Data:', data);
                    document.getElementById('map-iframe').src = document.getElementById('map-iframe').src;
                })
                .catch(error => console.error('Error fetching GPS data:', error));
        });

        document.getElementById('push-data-button').addEventListener('click', function () {
            fetch('/api/push-data', {
                method: 'POST'
            })
                .then(response => response.json())
                .then(data => {
                    alert(data.message);
                    console.log('Push Data Response:', data);
                })
                .catch(error => console.error('Error pushing data:', error));
        });
    </script>
</body>

</html>