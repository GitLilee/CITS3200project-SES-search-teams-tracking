
<!-- HERE

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Data Visualization v1.0</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <header>
        GPS Data Visualization v1.0
    </header>

    -->
    <!-- Dropdown for selecting Azure containers -->

    <!-- HERE

    <div id="container-selector">
        <label for="container-dropdown">Select Azure Container:</label>
        <select id="container-dropdown">
            {% for container in container_names %}
            <option value="{{ container }}">{{ container }}</option>
            {% endfor %}
        </select>
        <button id="fetch-data-button">Fetch Latest GPS Data</button>
    </div>

    HERE -->

    <!-- Map container -->
<!-- HERE

    <div id="map-container">
        <iframe src="{{ url_for('static', filename='footprint.html') }}" width="100%" height="100%" style="border:none;"
            id="map-iframe"></iframe>
    </div>

     HERE -->

    <!-- Section to display device information -->
    <!-- <div id="data-container"> -->
        <!-- <h2>Device Information</h2> -->
        <!-- <ul id="device-list"> -->
            <!-- This will be dynamically populated by JavaScript -->
            <!-- {% for device in device_data %} -->
            <!-- <li> -->
                <!-- <strong>Container:</strong> {{ device.container_name }} <br> -->
                <!-- <strong>Additional Data:</strong> {{ device.data }} -->
            <!-- </li> -->
            <!-- {% endfor %} -->
        <!-- </ul> -->
    <!-- </div> -->
    
<!-- HERE
    <script>
        document.getElementById('fetch-data-button').addEventListener('click', function () {
            const selectedContainer = document.getElementById('container-dropdown').value;

            fetch(`/api/update-map?container=${selectedContainer}`, {
                method: 'POST'
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Update Map Response:', data);

                    // Update the iframe to show the new map for the selected container
                    document.getElementById('map-iframe').src = data.map_path;
                })
                .catch(error => console.error('Error updating map:', error));
        });
    </script>
</body>

</html>
HERE -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Data Visualization v1.0</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <header>
        GPS Data Visualization v1.0
    </header>

    <!-- Dropdown for selecting Azure containers -->
    <div id="container-selector">
        <label for="container-dropdown">Select Azure Container:</label>
        <select id="container-dropdown">
            <!-- Dynamically populated with container names from the server -->
            {% for container in container_names %}
            <option value="{{ container }}">{{ container }}</option>
            {% endfor %}
        </select>
        <button id="fetch-data-button">Fetch Latest GPS Data</button>
    </div>

    <!-- Map container -->
    <div id="map-container">
        <!-- The iframe displays the map saved as footprint.html -->
        <iframe src="{{ url_for('static', filename='footprint.html') }}" width="100%" height="100%" style="border:none;"
            id="map-iframe"></iframe>
    </div>

    <!-- Optional Section: For future device information display -->
    <!-- <div id="data-container"> -->
        <!-- <h2>Device Information</h2> -->
        <!-- <ul id="device-list"> -->
            <!-- This will be dynamically populated by JavaScript -->
            <!-- {% for device in device_data %} -->
            <!-- <li> -->
                <!-- <strong>Container:</strong> {{ device.container_name }} <br> -->
                <!-- <strong>Additional Data:</strong> {{ device.data }} -->
            <!-- </li> -->
            <!-- {% endfor %} -->
        <!-- </ul> -->
    <!-- </div> -->

    <script>
        // Event listener for the button to fetch the latest GPS data
        document.getElementById('fetch-data-button').addEventListener('click', function () {
            const selectedContainer = document.getElementById('container-dropdown').value;

            // Send a request to the server to update the map based on the selected container
            fetch(`/api/update-map?container=${selectedContainer}`, {
                method: 'POST'
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Update Map Response:', data);

                    // Refresh the iframe to show the updated map
                    document.getElementById('map-iframe').src = data.map_path;
                })
                .catch(error => console.error('Error updating map:', error));
        });
    </script>
</body>

</html>
